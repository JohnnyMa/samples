<!DOCTYPE html>
<html>
	<head>
		<title>use bootstrap in DUST template</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css">
		<script src="js/jquery-1.11.3.js" type="text/javascript"></script>
		<script src="js/dust-full.js" type="text/javascript"></script>
		<script src="js/bootstrap.js" type="text/javascript"></script>

	</head>
	<body>
		<h1>test result:</h2>
	<section id="result"></section>
</body>
<script>
	var tpl_string = '<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Open modal for @mdo</button>' +
	'<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">' +
		'<div class="modal-dialog" role="document">' +
			'<div class="modal-content">' +
				'<div class="modal-header">' +
					'<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
					'<h4 class="modal-title" id="exampleModalLabel">New message</h4>' +
				'</div>' +
				'<div class="modal-body">' +
					'<form>' +
						'<div class="form-group">' +
							'<label for="recipient-name" class="control-label">Recipient:</label>' +
							'<input type="text" class="form-control" id="recipient-name">' +
						'</div>' +
						'<div class="form-group">' +
							'<label for="message-text" class="control-label">Message:</label>' +
							'<textarea class="form-control" id="message-text"></textarea>' +
						'</div>' +
					'</form>' +
				'</div>' +
				'<div class="modal-footer">' +
					'<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>' +
					'<button type="button" class="btn btn-primary">Send message</button>' +
				'</div>' +
			'</div>' +
		'</div>' +
	'</div>';


	var tpl = dust.compile(tpl_string, "tpl");
	dust.loadSource(tpl);
	var data = {
		people: ["jim", "jane", "jack", "julie"],
		how: "SYNCHRONOUSLY!"
	};
	var result;
	dust.render("tpl", data, function(err, res) {
		result = res;
		console.log("1" + Date.now());
		console.log(result);
		$("#result").html(result);

		$('#exampleModal').on('show.bs.modal', function (event) {
		var button = $(event.relatedTarget); // Button that triggered the modal
		var recipient = button.data('whatever'); // Extract info from data-* attributes
		// If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
		// Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
		var modal = $(this);
		modal.find('.modal-title').text('New message to ' + recipient);
		modal.find('.modal-body input').val(recipient);
		})
	});
</script>
</html>